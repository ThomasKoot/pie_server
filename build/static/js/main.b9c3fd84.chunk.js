(this.webpackJsonppie_maker=this.webpackJsonppie_maker||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(7),c=a.n(r),l=(a(14),a(2)),o=function(){return i.a.createElement("div",{className:"header mb-2 mb-md-5"},i.a.createElement("h2",null,"INTERACTIVE PIE-CHART"))},s=["#CEAC41","rgb(50, 168, 113)","rgb(168, 50, 50)","#DAC27C","rgb(50, 168, 168)","#A8651E","#8DA229","#FF8882","#543855","#105160"],u=(Math.PI,function(e,t,a,n){var i=e.canvas.width/2/devicePixelRatio,r=e.canvas.height/2/devicePixelRatio,c=e.canvas.width/devicePixelRatio*.25,l=performance.now();console.log(a),"init"===a?m(e,n):"clearCanvas"===a?function(e,t,a,n,i,r,c,l){n.save(),n.scale(window.devicePixelRatio,window.devicePixelRatio);var o=(r-i)/c;o=o>=1?1:o,n.beginPath(),n.arc(e,t,a,-.5*Math.PI,-.5*Math.PI+2*o*Math.PI),n.lineTo(e,t),n.fillStyle="rgb(240, 240, 240)",n.fill(),o>=1&&l("animatedCircle"),n.restore()}(i,r,c,e,t.timestamp,l,1e3,n):"animatedCircle"===a?function(e,t,a,n,i,r,c,l,o){n.save(),n.scale(window.devicePixelRatio,window.devicePixelRatio);var s=(r-i)/c;s=s>=1?1:s;var u=-.5*Math.PI+2*Math.PI*s;l.forEach((function(i,r){u<i.startAngle||(n.beginPath(),n.arc(e,t,a,i.startAngle,Math.min(u,i.startAngle+i.arcLength)),n.lineTo(e,t),n.fillStyle=i.color,n.fill())})),s>=1&&o("animatedPieSlices"),n.restore()}(i,r,c,e,t.timestamp+1e3,l,1e3,t.data,n):"animatedPieSlices"===a&&d(i,r,c,e,t.data,n)}),d=function(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;n.save(),n.scale(window.devicePixelRatio,window.devicePixelRatio),n.clearRect(0,0,n.canvas.width/devicePixelRatio,n.canvas.height/devicePixelRatio),i.forEach((function(r,c){if(0!==r.arcLength){n.beginPath(),n.arc(e,t,a,r.startAngle,r.startAngle+r.arcLength),n.lineTo(e,t),n.fillStyle=r.color,n.fill();var l=!1;if(r.arcLength<.3&&(0!==c&&i[c-1].arcLength<.3||c<=i.length-2&&i[c+1].arcLength<.3)&&(l=!0),l){var o=.02*(n.canvas.width/devicePixelRatio),s=o/5;n.save(),n.translate(e,t),n.rotate(r.startAngle);for(var u=0;u<3;u++)n.beginPath(),n.arc(r.pushCoordinates.x*(a+o+o*u),r.pushCoordinates.y*(a+o+o*u),s,0,2*Math.PI),n.fill();n.restore()}}})),n.restore(),r&&r("finished")},m=function(e,t){var a=e.canvas.width/devicePixelRatio,n=e.canvas.height/devicePixelRatio;e.save(),e.scale(window.devicePixelRatio,window.devicePixelRatio),e.clearRect(0,0,a,n),e.restore(),t("clearCanvas")},v=a(1),h=function(e){var t=e.width,a=e.height,n=i.a.useState(void 0),r=Object(l.a)(n,2),c=r[0],o=r[1];if(!1===e.isFinished)return i.a.createElement(i.a.Fragment,null);var s=function(){var n=.03*t,r=.2*t,l=.25*t,o=.05*t;return e.data.data.map((function(s,u){var d={fontSize:n,top:Math.max(s.textY*(l+o)+a/2-n,2)+10,color:s.color},m=!0;return d=s.textAngle>.5*Math.PI?Object(v.a)(Object(v.a)({},d),{},{left:s.textX*(l+o)+t/2-r+10,textAlign:"right",width:r+"px"}):Object(v.a)(Object(v.a)({},d),{},{left:s.textX*(l+o)+t/2.1+15}),s.arcLength<.3&&u!==c&&(0!==u&&e.data.data[u-1].arcLength<.3||u<=e.data.data.length-2&&e.data.data[u+1].arcLength<.3)&&(m=!1),void 0!==c&&c!==u&&(d.color="rgba(200, 200, 200, 0.8)"),i.a.createElement("div",{className:"floating_label_container",key:s.startAngle,style:{width:e.width,height:e.height}},i.a.createElement("p",{className:"label_text",style:d},m?s.name:""))}))};return i.a.createElement("div",{className:"canvas_overlay",style:{width:t+"px",height:a+"px"},onMouseMove:function(n){if(e.isFinished){cancelAnimationFrame(e.requestId.current);var i,r=e.canvas.current,c=r.getContext("2d");c.restore(),c.save(),c.scale(devicePixelRatio,devicePixelRatio);var l=r.getBoundingClientRect(),s=n.clientX-l.left,u=n.clientY-l.top;e.data.data.forEach((function(e,n){c.beginPath(),c.arc(t/2,a/2,.25*t,e.startAngle,e.startAngle+e.arcLength),c.lineTo(t/2,a/2),c.closePath(),c.isPointInPath(s*window.devicePixelRatio,u*window.devicePixelRatio)&&(i=n)})),o(i),c.restore(),e.callPie(c,i)}}},i.a.createElement(s,null))},f=function(e){var t=i.a.useState(void 0),a=Object(l.a)(t,2),r=a[0],c=a[1],o=i.a.useState(void 0),d=Object(l.a)(o,2),m=d[0],v=d[1],f=Object(n.useRef)(),p=Object(n.useRef)(),g=Object(n.useRef)(void 0),b=function(e){g.current=e},w=function(){var t=f.current.parentElement.offsetWidth/1;c(t),v(t*(2/3)),"finished"===g.current&&u(f.current.getContext("2d"),e.data,"animatedPieSlices")};Object(n.useEffect)((function(){return w()}),[]),Object(n.useEffect)((function(){return window.addEventListener("resize",w),function(){return window.removeEventListener("resize",w)}})),Object(n.useEffect)((function(){cancelAnimationFrame(p.current),b("init")}),[e.data]),Object(n.useEffect)((function(){if(e.data&&!e.isFinished){return function t(){var a=f.current.getContext("2d");a.restore(),u(a,e.data,g.current,b),"finished"!==g.current?p.current=requestAnimationFrame(t):e.setIsFinished(!0)}(),function(){return cancelAnimationFrame(p.current)}}}));return i.a.createElement("div",{className:"col-md-8",id:"taart"},i.a.createElement("div",{className:"canvas_container radiusbox"},i.a.createElement("canvas",{ref:f,width:r*window.devicePixelRatio,height:m*window.devicePixelRatio,style:{width:r+"px",height:m+"px"}}),i.a.createElement(h,{width:r,height:m,data:e.data,canvas:f,requestId:p,callPie:function(t,a){return function n(i){void 0===i?(p.current=requestAnimationFrame(n),t.restore()):(p.current=requestAnimationFrame(n),function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=e.canvas.width/devicePixelRatio,i=e.canvas.height/devicePixelRatio,r=e.canvas.width/devicePixelRatio*.25,c=.015*n;e.save(),e.scale(window.devicePixelRatio,window.devicePixelRatio),e.clearRect(0,0,n,i);var l=!1;return t.forEach((function(o,u){if(0!==o.arcLength){u===a?(o.mult+=.05,o.mult=o.mult<=1?o.mult:1):(o.mult-=.05,o.mult=o.mult>=0?o.mult:0),0!==o.mult&&1!==o.mult&&(l=!0),e.save(),e.translate(n/2,i/2),e.rotate(o.startAngle),e.beginPath(),u===a?(e.arc(o.pushCoordinates.x*Math.pow(o.mult,.5)*c,o.pushCoordinates.y*Math.pow(o.mult,.5)*c,r,0,o.arcLength),e.lineTo(o.pushCoordinates.x*Math.pow(o.mult,.5)*c,o.pushCoordinates.y*Math.pow(o.mult,.5)*c)):(e.arc(o.pushCoordinates.x*Math.pow(o.mult,2)*c,o.pushCoordinates.y*Math.pow(o.mult,2)*c,r,0,o.arcLength),e.lineTo(o.pushCoordinates.x*Math.pow(o.mult,2)*c,o.pushCoordinates.y*Math.pow(o.mult,2)*c)),e.closePath(),e.fillStyle=s[u],e.fill();var d={lower:!1,upper:!1};if(o.arcLength<.3&&u!==a&&(0!==u&&t[u-1].arcLength<.3?d.lower=!0:u<=t.length-2&&t[u+1].arcLength<.3&&(d.upper=!0)),d.lower||d.upper)for(var m=.02*n,v=m/5,h=0;h<3;h++)e.beginPath(),e.arc(o.pushCoordinates.x*(r+m*(h+1)),o.pushCoordinates.y*(r+m*(h+1)),v,0,2*Math.PI),void 0===a?e.fill():a===u||a===u-1&&d.lower||a===u+1&&d.upper?e.closePath():(e.fillStyle="rgba(200, 200, 200, 0.8)",e.fill());e.restore()}})),e.restore(),l}(t,e.data.data,a)||cancelAnimationFrame(p.current))}(),function(){return cancelAnimationFrame(p.current)}},isFinished:e.isFinished})))},p=a(8),g=a(5),b=function(e){var t=function(t){var a=null;t.target.value.length>15&&(a={id:t.target.id.match(/\d+/)[0],field:"name_input",message:"max 15 char"}),e.setErr(function(){var n=Object(g.a)(e.err);return n=n.filter((function(e){return!!e&&"name_input"+e.id!==t.target.id})),a&&n.push(a),n}());var n=Object(v.a)(Object(v.a)({},e.userInput),{},{fields:e.userInput.fields.map((function(e){return"name_input"+e.id===t.target.id?Object(v.a)(Object(v.a)({},e),{},{name:t.target.value}):e}))});e.setUserInput(n)},a=function(t){var a=null;t.target.value.match(/^\d+$/)||""===t.target.value||(a={id:t.target.id.match(/\d+/)[0],field:"value_input",message:"input must be digits"}),e.setErr(function(){var n=Object(g.a)(e.err);return n=n.filter((function(e){return!!e&&"value_input"+e.id!==t.target.id})),a&&n.push(a),n}());var n=Object(v.a)(Object(v.a)({},e.userInput),{},{fields:e.userInput.fields.map((function(e){return"value_input"+e.id===t.target.id?Object(v.a)(Object(v.a)({},e),{},{value:t.target.value}):e}))});e.setUserInput(n)},n=function(t){var a=Object(v.a)(Object(v.a)({},e.userInput),{},{fields:e.userInput.fields.filter((function(e){return e.id!==t.target.id.match(/\d+$/)[0]}))});e.setUserInput(a);var n=Object(g.a)(e.err);n=n.filter((function(e){return e.id!==t.target.id.match(/\d+$/)[0]})),e.setErr(n)};return e.userInput.fields.map((function(r,c){var l=function(t){if(e.err){var a=e.err.filter((function(e){return e.id===r.id}));if(a){var n,i=Object(p.a)(a);try{for(i.s();!(n=i.n()).done;){if(t===n.value.field)return" is-invalid"}}catch(c){i.e(c)}finally{i.f()}}}},o=function(e){return 0===c?e:""};return i.a.createElement("div",{key:"data_input_field"+r.id},i.a.createElement("div",null,i.a.createElement("div",{className:"form-row mt-2"},i.a.createElement("div",{className:"col-6"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm"+l("name_input"),name:"name_input",id:"name_input"+r.id,value:r.name,onChange:t,placeholder:o("name")}),i.a.createElement("div",{className:"invalid-feedback"},"max 15 char.")),i.a.createElement("div",{className:"col-5"},i.a.createElement("input",{type:"text",className:"form-control form-control-sm"+l("value_input"),name:"value_input",id:"value_input"+r.id,value:r.value,onChange:a,placeholder:o("value")}),i.a.createElement("div",{className:"invalid-feedback"},"only numbers")),i.a.createElement("div",{className:"col-1 mt-1"},i.a.createElement("button",{type:"button",className:"close","aria-label":"Close"},i.a.createElement("span",{"aria-hidden":"true",onClick:n,id:"remove_entry"+r.id},"\xd7"))))))}))},w=function(e){return i.a.createElement("div",{className:"form-row mt-2",style:{paddingBottom:"10px"}},i.a.createElement("div",{className:"col-6"},i.a.createElement("button",{type:"button",className:"btn btn-outline append-button",onClick:function(){var t=e.userInput.idCounter+1,a=e.userInput.fields.concat({value:"",name:"",id:t.toString()}),n={idCounter:t,fields:a};e.setUserInput(n)}},"append")),i.a.createElement("div",{className:"col-6"},i.a.createElement("button",{type:"button",className:"btn btn-outline generate-button float-left",onClick:function(){if(0===e.err.length){var t=e.userInput.fields.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{value:Number(e.value)})}));e.generatePie(t)}else console.log("can't generate pie")}},"generate")))},E=function(e){var t=i.a.useState({idCounter:3,fields:[{name:"",value:"",id:"0"},{name:"",value:"",id:"1"},{name:"",value:"",id:"2"}]}),a=Object(l.a)(t,2),n=a[0],r=a[1],c=i.a.useState([]),o=Object(l.a)(c,2),s=o[0],u=o[1];return i.a.createElement("div",{className:"col-md-4"},i.a.createElement("div",{className:"data_input_container"},i.a.createElement("div",null,i.a.createElement("form",null,i.a.createElement(b,{userInput:n,setUserInput:r,err:s,setErr:u}))),i.a.createElement(w,{userInput:n,setUserInput:r,generatePie:e.generatePie,err:s})))},P=function(e){return i.a.createElement("div",{className:"mt-2 mt-md-4"},i.a.createElement("div",{className:"footer"},i.a.createElement("p",{className:"footer-text"},"Programming & Design by Thomas Koot"," ",i.a.createElement("br",null)," ","www.thomascode.nl")))},x=function(e){var t=2*Math.PI,a=-.5*Math.PI,n=e.reduce((function(e,t){return e+t.value}),0);return{data:e.map((function(e,i){var r=e.value/n*t,c=a+r/2,l=c>.5*Math.PI?"end":"start",o=Math.cos(c),u=Math.sin(c),d={x:Math.cos(r/2),y:Math.sin(r/2)},m=Object(v.a)(Object(v.a)({},e),{},{startAngle:a,arcLength:r,textAngle:c,textAlign:l,textX:o,textY:u,color:s[i],mult:0,pushCoordinates:d});return a+=r,m})),timestamp:performance.now()}},I=function(){var e=i.a.useState(null),t=Object(l.a)(e,2),a=t[0],n=t[1],r=i.a.useState(!1),c=Object(l.a)(r,2),s=c[0],u=c[1];return i.a.createElement("div",{className:"container"},i.a.createElement(o,null),i.a.createElement("div",{className:"row row-content"},i.a.createElement(E,{generatePie:function(e){n(x(e)),u(!1)}}),i.a.createElement(f,{data:a,isFinished:s,setIsFinished:u})),i.a.createElement(P,null))};a(15);var j=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.b9c3fd84.chunk.js.map